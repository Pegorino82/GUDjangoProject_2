{% extends 'myshop/base.html' %}

{% load staticfiles %}

{% block page_title %}
{{title}}
{% endblock %}

{% block bootstrap_css %}
{% endblock %}

{% block style_css %}
<link rel="stylesheet" href="{% static 'ordersapp/styles/order.css' %}">
{% endblock %}

{% block small_menu_items %}
{% endblock %}

{% block small_menu_mainpage %}
{% endblock %}

{% block large_menu_items %}
{% endblock %}

{% block large_menu_mainpage %}
{% endblock %}

{% block right_content %}
<div class="main_section">
    <div class="main_section_header">
        create order
    </div>
    <form method="post" enctype="multipart/form-data">
        {% csrf_token %}

        {% for err in form.not_field_errors %}
            <span>{{err}}</span>
        {% endfor %}

        {% for field in form %}
        <label for="{{field.name}}">{{field.label}}:</label>
        {% if not user.is_staff %}
            <input type="hidden" readonly name="user" id="id_user" value="{{user.id}}">
            {{user}}
        {% else %}
            {{field}}
        {% endif %}
        {{field.errors.as_ul}}
        {% endfor %}

        <table class="table">
            {{ formset.management_form }}
            {% for form in formset.forms %}
            {% if forloop.first %}
            <thead>
            <tr>
                {% for field in form.visible_fields %}
                <th>
                    {{ field.label|capfirst }}
                </th>
                {% endfor %}
            </tr>
            </thead>
            {% endif %}
            <tr>
                {% for field in form.visible_fields %}
                <td>
                    {% if forloop.first %}
                    {% for hidden in form.hidden_fields %}
                        {{ hidden }}
                    {% endfor %}
                    {% endif %}
                    {{ field.errors.as_ul }}
                    {{ field }}
                </td>
                {% endfor %}
            </tr>
            {% endfor %}
        </table>
        <button class="btn btn-primary" type="submit">Create</button>
    </form>
</div>
{% endblock %}

{% block bootstrap_js %}
{% endblock %}